type DataEntry @entity(immutable: true) {
  id: ID! # txHash-logIndex
  user: Bytes!
  data: String!
  dataType: String!
  timestamp: BigInt!
  blockNumber: BigInt!
  dataHash: Bytes!
  entryId: BigInt!
  transactionHash: Bytes!
}

type User @entity(immutable: false) {
  id: ID! # user address
  dataEntries: [DataEntry!]! @derivedFrom(field: "user")
  totalEntries: BigInt!
  firstEntryTime: BigInt
  lastEntryTime: BigInt
}

type DataStorageContract @entity(immutable: false) {
  id: ID! # contract address
  totalEntries: BigInt!
  totalUsers: BigInt!
  deploymentBlock: BigInt!
  deploymentTime: BigInt!
  deployer: Bytes!
}

type DailyStats @entity(immutable: false) {
  id: ID! # YYYY-MM-DD
  date: String!
  entriesCount: BigInt!
  activeUsers: BigInt!
  newUsers: BigInt!
}